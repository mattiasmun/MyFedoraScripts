#!/bin/python3
from plumbum import local, FG, BG
import pyautogui as gui
import sys
import time

gui.PAUSE = 0.02
gui.FAILSAFE = True

gui.keyUp('enter')

wmctrl = local["wmctrl"]
wmctrl["-xa", sys.argv[1]] & FG

time.sleep(0.1)

_x0, _y0 = gui.position()
_x, _y = _x0, _y0
#pix = gui.pixel(_x0, _y0)

t_len = eval(sys.argv[2])
t_len = float(t_len)
t_len = round(t_len, 9)
t_end = time.monotonic() + t_len

while time.monotonic() < t_end and _x0 == _x and _y0 == y: #and gui.pixelMatchesColor(_x0, _y0, pix, tolerance=8):
	gui.click(x=_x0, y=_y0)
	_x, _y = gui.position()

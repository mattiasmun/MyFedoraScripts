#!/bin/python3
from math import sqrt
from plumbum import local, FG, BG
import pyautogui as gui
import sys
import time

gui.PAUSE = 0.02
gui.FAILSAFE = True

gui.keyUp('enter')

wmctrl = local['wmctrl']
wmctrl['-xa', 'ck2.ck2'] & FG

time.sleep(0.1)

_x0, _y0 = gui.position()
_x, _y = _x0, _y0
_max_len = 10
_next = '.'

_id = sys.argv[1]
if len(sys.argv) == 2:
	sys.argv += [0] * 5
_dip = str(100 - int(sys.argv[2]))
_mar = str(100 - int(sys.argv[3]))
_ste = str(100 - int(sys.argv[4]))
_int = str(100 - int(sys.argv[5]))
_lea = str(100 - int(sys.argv[6]))

_list = ['add_diplomacy ' + _id + ' ' + _dip]
_list += ['add_martial ' + _id + ' ' + _mar]
_list += ['add_stewardship ' + _id + ' ' + _ste]
_list += ['add_intrigue ' + _id + ' ' + _int]
_list += ['add_learning ' + _id + ' ' + _lea]
_list += ['add_trait administrator ' + _id]
_list += ['add_trait brave ' + _id]
_list += ['add_trait brilliant_strategist ' + _id]
_list += ['add_trait charitable ' + _id]
_list += ['add_trait chaste ' + _id]
_list += ['add_trait crusader_king ' + _id]
_list += ['add_trait diligent ' + _id]
_list += ['add_trait duelist ' + _id]
_list += ['add_trait genius ' + _id]
_list += ['add_trait humble ' + _id]
_list += ['add_trait hunter ' + _id]
_list += ['add_trait immortal ' + _id]
_list += ['add_trait kind ' + _id]
_list += ['add_trait patient ' + _id]
_list += ['add_trait shrewd ' + _id]
_list += ['add_trait skilled_tactician ' + _id]
_list += ['add_trait strategist ' + _id]
_list += ['add_trait strong ' + _id]
_list += ['add_trait temperate ' + _id]

_iter = iter(_list)

def _check():
	global _next, _x, _y
	_x, _y = gui.position()
	_d_x = _x0 - _x
	_d_y = _y0 - _y
	_dist = sqrt(_d_x * _d_x + _d_y * _d_y)
	_bool = _dist <= _max_len
	_next = next(_iter, 0)
	_bool = _next != 0 and _bool
	return _bool

while _check():
	gui.moveTo(_x0, _y0)
	gui.write(_next)
	gui.press('enter')
